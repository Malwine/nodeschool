<!DOCTYPE html>
<html>
<body>

<p>A script on this page starts this clock:</p>

<form id="timerForm" action="">
  <label>Timer - Minuten einstellen:</label>
  <input id="minutes" type="text" name="minutes" value="0"><br>
  <input type="submit" value="Start">
</form>

<button id="resetButton" type="button" name="button">Reset</button>
<h2>Du hast noch <strong id="minutes-left"></strong> Minuten</h2>

<script>
function getSecondsRemaining(seconds) {
    return seconds - 1;
}

function countdown(event) {
    event.preventDefault();
    const minutes = window.document.getElementById('minutes').value;
    let seconds = minutes * 60;
    const input = window.document.getElementById('minutes-left');
    input.innerHTML = `${minutes} : 00`;
    console.log(`seconds: ${seconds}`);

    const updateTime = function intervalFunc() {
        if (seconds <= 4) {
            window.document.body.style.background = '#ff0000';
        }

        if (seconds <= 0) {
            clearInterval(interval);
        } else {
            const t = getSecondsRemaining(seconds);
            seconds = t;
            console.log(`time remaining: ${t}`);
            const minutesLeft = window.document.getElementById('minutes-left');
            const printMinutes = Math.floor(t / 60);
            const printSeconds = ('0' + (Math.round(t % 60))).slice(-2);
            const remainingTime = `${printMinutes} : ${printSeconds}`;
            minutesLeft.innerHTML = remainingTime;
        }
    };

    const interval = setInterval(updateTime, 1000);

    console.log(`Interval: ${interval}`);
}

function reset() {
    window.document.body.style.background = '#FFFFFF';
    window.document.getElementById('minutes').value = 0;
}

const timerElement = window.document.getElementById('timerForm');
timerElement.addEventListener('submit', countdown);

const resetButton = window.document.getElementById('resetButton');
resetButton.addEventListener('click', reset);

</script>

</body>
</html>
